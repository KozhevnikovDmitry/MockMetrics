<?xml version="1.0" encoding="UTF-8"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>

  <appSettings>
    <!--Имя текущей конфигурации подключения-->
    <add key="ConnectionConfig" value="Postgre" />

    <!--Настройки подключения к базе Oracle-->
    <add key="OracleConnectionStringTemplate" value="Server={0};Port={1};Sid={2};User Id={3};Password={4};Direct=True;" />
    <add key="OracleServer" value="10.1.1.36" />
    <add key="OraclePort" value="1521" />
    <add key="OracleSid" value="bp" />

    <!--Настройки подключения к базе Postgre-->
    <add key="PostgreConnectionStringTemplate" value="Server={0};Port={1};Database={2};User Id={3};Password={4};" />
    <add key="PostgreServer" value="172.25.253.154" />
    <add key="PostgrePort" value="5432" />
    <add key="PostgreDatabase" value="gosus" />

    <add key="ClientSettingsProvider.ServiceUri" value="" />
  </appSettings>

  <system.serviceModel>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true">
    </serviceHostingEnvironment>

    <services>

      <service name="GU.Enisey.Service.ApplicationInquiryNotifierService" behaviorConfiguration="DefaultBehavior">
        <endpoint address=""
                  binding="basicHttpBinding"
                  bindingConfiguration="ApplicationInquiryNotifierBinding"
                  contract="GU.Enisey.Contract.ApplicationInquiryNotifierPortType12.ApplicationInquiryNotifierPortType12"
                  behaviorConfiguration="customPortNameApplicationInquiryNotifier"
                  bindingNamespace="urn://x-artefacts-it-ru/dob/poltava/application-inquiry-notify/1.2">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"
                  bindingNamespace="urn://x-artefacts-it-ru/dob/poltava/application-inquiry-notify/1.2"/>
        <host>
          <baseAddresses>
            <add baseAddress="http://gusmev.gosserv.krs/GU.Enisey.Service.Test.12/ApplicationInquiryNotifierService.svc" />
          </baseAddresses>
        </host>
      </service>


      <!-- все-равно пока не используется
      <service name="GU.Enisey.Service.InquiryInternalService" behaviorConfiguration="DefaultBehavior">
        <endpoint address=""
                  binding="basicHttpBinding"
                  bindingConfiguration="ApplicationInquiryNotifierBinding"
                  contract="GU.Enisey.Contract.InquiryInternalPortType10"
                  behaviorConfiguration="customPortNameInquiryInternal"
                  bindingNamespace="urn://x-artefacts-it-ru/dob/poltava/inquiry-internal/1.0">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"
                  bindingNamespace="urn://x-artefacts-it-ru/dob/poltava/inquiry-internal/1.0"/>
        <host>
          <baseAddresses>
            <add baseAddress="http://gusmev.gosserv.krs/GU.Enisey.Service.Test/InquiryInternalService.svc" />
          </baseAddresses>
        </host>
      </service>-->
      
    </services>

    <extensions>
      <behaviorExtensions>
        <add name="portName" type="GU.Enisey.Contract.PortNameWsdlBehaviorExtension, GU.Enisey.Contract" />
      </behaviorExtensions>
    </extensions>

    <bindings>
      <basicHttpBinding>

        <binding name="ApplicationInquiryNotifierBinding" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="2147483647"
                        maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
        </binding>

        <binding name="AppQuirySoap11Binding"
                 closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                 allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                 maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                 messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>

      </basicHttpBinding>
    </bindings>

    <client>
      <!-- В министерстве этот адрес ресолвится так: 172.25.253.2:8080
           не забыть изменить адрес при деплое -->
      <endpoint address="http://109.195.65.227:8080/poltava-ws-appquiry/AppQuiryService10?wsdl"
                binding="basicHttpBinding" bindingConfiguration="AppQuirySoap11Binding"
                contract="GU.Enisey.Contract.AppQuiryPortType10" name="AppQuiryEndpoint10" />
    </client>

    <behaviors>
      
      <serviceBehaviors>
        <behavior name="DefaultBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
        
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>

      <endpointBehaviors>
        <behavior name="customPortNameApplicationInquiryNotifier">
          <portName name="ApplicationInquiryNotifierEndpoint" />
        </behavior>

        <behavior name="customPortNameInquiryInternal">
          <portName name="InquiryInternalEndpoint" />
        </behavior>
      </endpointBehaviors>
      
    </behaviors>

    <diagnostics>
      <messageLogging logEntireMessage="true"
                      logMalformedMessages="true"
                      logMessagesAtServiceLevel="true"
                      logMessagesAtTransportLevel="false"
                      maxMessagesToLog="-1" />
    </diagnostics>

  </system.serviceModel>

  <system.diagnostics>
    <sources>
      
      <source name="System.ServiceModel.MessageLogging">
        <listeners>
          <add name="messages" type="System.Diagnostics.XmlWriterTraceListener" initializeData="messages.svclog" />
          <add type="System.Diagnostics.DefaultTraceListener" name="Default" />
        </listeners>
      </source>
      
      <source name="System.ServiceModel" switchValue="Warning,ActivityTracing" propagateActivity="true">
        <listeners>
          <add type="System.Diagnostics.DefaultTraceListener" name="Default" />
          <add name="ServiceModelTraceListener" />
        </listeners>
      </source>
      
    </sources>

    <sharedListeners>
      <add initializeData="Web_tracelog.svclog"
        type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
        name="ServiceModelTraceListener" traceOutputOptions="Timestamp" />
    </sharedListeners>

  </system.diagnostics>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <directoryBrowse enabled="true" />
  </system.webServer>

</configuration>